🐙 Octopus Bot 2026 기능 명세서
이 봇은 **자동 종목 발굴(Scanning)**부터 정밀 타점 진입(Entry), 리스크 관리(Risk Management), **매매 기록(Logging)**까지 전 과정을 수행하는 올인원(All-in-One) 시스템 트레이딩 봇입니다.

1. 🔍 종목 선별 기준 (Auto Discovery)
market_scanner.py와 main.py의 auto_tuner_loop가 4시간마다 시장 전체를 스캔하여 타겟 코인을 자동으로 교체합니다.

1차 필터 (유동성 공급): 업비트 원화 마켓 전 종목 중 24시간 거래대금 상위 40개를 1차 후보로 선정하여, 거래량이 없는 '잡코인'을 배제합니다.

2차 필터 (기술적 지표): 다음 중 하나를 만족하는 종목을 최종 타겟으로 선정합니다.

RSI 과매도: RSI(14) 지표가 40 이하인 경우.

볼린저 밴드 하단: 현재 가격이 볼린저 밴드 하단 1% 범위 내에 접근한 경우.

안전장치: 조건에 맞는 종목이 3개 미만일 경우, 대장주인 BTC, ETH, XRP를 강제로 타겟에 포함시킵니다.

2. 🚀 매수 진입 조건 (Entry Strategy)
선별된 종목이라도 무조건 사지 않습니다. strategy/signal_maker.py에서 다음 조건들을 모두 통과해야만 진입합니다.

A. 사전 필수 검증 (Pre-Check)
김프(Kimchi Premium) 제한: 김프가 5%(MAX_KIMP_THRESHOLD) 이상 끼어있으면 매수 금지.

틱 효율성(BEP) 검사: 수수료(0.1%)를 극복하기 위해 필요한 호가 단위가 15틱(MAX_TICKS_FOR_BEP) 이상이면 매수 금지 (수익 내기 힘든 구조).

허매수(Spoofing) 필터링: 호가창에서 매수벽은 두꺼운데(Bid > Ask * 2), 최근 3초간 실제 매수 체결액이 100만 원 미만이면 **'허매수'**로 판단하여 진입 취소.

B. 진입 전략 (Signal Logic)
두 가지 전략 중 하나가 만족되면 매수합니다.

전략 1: 정밀 타점 (Precision Entry) - 일반적인 경우

RSI 과매도: RSI(14)가 25 미만.

볼린저 밴드: 가격이 밴드 하단을 터치하거나 이탈.

골든 크로스: 단기 RSI(9)가 장기 RSI(14)를 상향 돌파.

VWAP 지지: 현재가가 세력 평단가(VWAP)의 99.5% 이상에서 지지받고 있음.

전략 2: 역프리미엄 스나이퍼 (Reverse Premium) - 특수 상황

조건: 김프가 -1.0% 이하(역프)인 경우.

완화된 기준: RSI가 35 미만이어도 공격적으로 진입합니다.

3. 💰 매도 및 청산 조건 (Exit Strategy)
execution/risk_manager.py에서 수익을 확정하거나 손실을 방어합니다.

A. 익절 (Take Profit)
분할 익절 (Sell Half): 수익률이 0.3% 이상이고, 볼린저 밴드 중심선(Mid) 도달 시 보유량의 50% 매도.

최종 익절 (Sell All):

볼린저 밴드 상단(Upper) 터치 시 전량 매도.

또는 RSI가 70(RSI_SELL_THRESHOLD) 이상(과매수) 도달 시 전량 매도.

트레일링 스탑 (Trailing Stop): 수익률이 0.5% 이상 도달 후, 고점 대비 0.3% 하락하면 이익 보존을 위해 전량 매도.

B. 손절 (Stop Loss)
가격 손절: 수익률이 -1.5%(STOP_LOSS_PCT) 도달 시 즉시 손절.

지표 손절 (Trend Broken):

VWAP 붕괴: 진입 3분 후, 가격이 VWAP보다 1% 이상 하락하면 추세 이탈로 보고 손절.

RSI 투매: 진입 5분 후, RSI가 15(RSI_PANIC_SELL) 미만으로 떨어지면 패닉셀로 보고 손절.

시간 손절 (Time Cut): 진입 후 **3분(180초)**이 지났는데 수익률이 0.2% 미만이면 기회비용 확보를 위해 종료.

4. 🛡️ 안전장치 및 자금 관리 (Risk & Safety)
동적 사이징 (Dynamic Sizing): 무리한 투자를 막기 위해 매수 금액을 제한합니다. (execution/order_manager.py)

자산 제한: 내 현금 잔고의 **25%**까지만 한 종목에 투자.

호가 제한: 호가창 매도 잔량(1~5호가)의 **10%**까지만 주문 (슬리피지 방지).

거시경제 필터 (Macro Filter): 미국 나스닥 개장 전후(23:20 ~ 23:40)나 중요 경제 지표 발표 시 매매를 1분간 일시 정지합니다.

호가창 매도 전략: 매도 시 매도벽이 너무 두꺼우면(Ask > Bid * 3) 지정가 대신 시장가로 급하게 처분합니다.

5. 📝 시스템 아키텍처 및 로깅
AI Auto Pilot: 4시간마다 auto_tuner_loop가 설정을 최적화하고 타겟 코인을 교체합니다.

실시간 대응: DataAggregator가 웹소켓을 통해 가격, 체결 데이터(Trade), 설정 변경을 실시간으로 감지합니다.

기록 (Logging): 모든 매수/매도 행위는 trade_logger.py를 통해 trade_history.csv 파일에 타임스탬프, 진입 사유, 당시 지표 값(RSI, VWAP), 수익률과 함께 상세히 저장됩니다.






----추가 개선 사항 ---------------------------------------------------------------------


1. 호가 단위 변경에 따른 MAX_TICKS_FOR_BEP 설정 재검토
보고서의 **2.2절 (호가 단위 변경)**에 따르면, 1,000원~10,000원 구간의 호가가 0.5원으로 세분화되면서 손익분기점(BEP) 달성을 위해 필요한 틱 수가 기존 5틱에서 10틱으로 증가했습니다.

현재 코드 상태:

strategy/calculator.py에는 0.5원 틱 단위가 이미 잘 반영되어 있습니다.

하지만 config.py의 진입 필터인 MAX_TICKS_FOR_BEP = 15 설정이 새로운 환경에서 충분히 안전한지 검토가 필요합니다.

개선 제안:

보고서에서 언급된 대로 슬리피지를 고려한 실질 수익률 목표가 0.2%~0.3%라면, 안전마진을 위해 MAX_TICKS_FOR_BEP를 12~13틱 수준으로 조금 더 보수적으로 조이는 것을 고려해볼 수 있습니다. 틱 가치가 낮아진 만큼 더 많은 호가를 잡아먹어야 하므로, 호가창이 얇으면 체결 오차가 커질 수 있기 때문입니다.

2. 김치 프리미엄의 '변화율(Delta)' 감지 로직 추가
보고서의 **4.1절 (김프 확대 구간)**에서는 단순한 김프 수치보다 **"글로벌 시세는 횡보하는데 김프만 급등하는 상황"**을 매도 시그널로 정의하고 있습니다. 현재 코드는 MAX_KIMP_THRESHOLD(절대값)만 체크합니다.

현재 코드 상태:

김프가 5% 이상이면 매수 금지 (signal_maker.py).

개선 제안 (기능 추가):

DataAggregator에서 김프의 최근 1분간 변화율을 계산하는 로직을 추가합니다.

예: (현재 김프 - 1분 전 김프) > 1.0% 이면, 가격이 오르고 있더라도 이를 **"과열(FOMO) 신호"**로 해석하여 매수를 보류하거나 보유 물량을 청산하는 로직을 RiskManager에 추가할 수 있습니다.

3. '체결 강도(Tape Reading)' 로직 고도화
보고서의 **6.2절 (체결 강도와 속도)**에서는 **"매도 물량이 빠른 속도로 연속적으로 잡아먹히는 현상(Sweep)"**을 진입 적기로 보고 있습니다. 현재 봇은 recent_buy_vol (최근 체결량 합계)만 봅니다.

현재 코드 상태:

execution/order_manager.py의 check_fake_buy는 최근 3초간 매수 체결액이 100만 원 미만이면 허매수로 판단합니다.

개선 제안:

단순 금액 합계뿐만 아니라 **"체결 빈도(Frequency)"**를 확인해야 합니다.

예: "최근 1초 동안 ASK(매도) 호가를 잡아먹는 BID 체결 건수가 5건 이상 발생했는가?"를 조건에 추가하면, 봇이나 세력이 시장가로 긁어 올리는 순간을 더 정확히 포착할 수 있습니다.

4. 바이낸스-업비트 시차 매매 (Leader-Follower) 정교화
보고서의 5.1절은 바이낸스 비트코인 급등 시, 업비트에서 **"베타 계수(Beta Coefficient)가 높은 알트코인"**을 매수하라고 조언합니다. 현재 봇은 미리 정해진 FOLLOWER_COINS 목록만 매수합니다.

현재 코드 상태:

BTC 급등 시 config.FOLLOWER_COINS (XRP, SOL, ETH, DOGE)를 순차적으로 매수 시도.

개선 제안:

market_scanner.py가 주기적으로 스캔할 때, 최근 1~4시간 동안 BTC와 상관관계(Correlation)가 가장 높았던 코인을 선별하여 FOLLOWER_COINS 리스트를 동적으로 업데이트하는 기능을 추가하면 적중률을 높일 수 있습니다. (예: 오늘따라 스택스(STX)가 비트를 잘 따라간다면 STX를 팔로워로 선정)

5. 매도 조건에 '김프 급락' 방어 로직 추가
보고서 4.3절에 따르면 매도 신호가 나왔더라도 "김프가 급격히 빠지고 있다면(해외 하락 < 국내 하락)" 잠시 기다렸다가 반등 시 매도하는 것이 유리하다고 합니다.

현재 코드 상태:

매도는 가격(-1.5%)이나 지표(RSI, VWAP) 기준으로 즉시 나갑니다.

개선 제안:

손절(Stop Loss) 상황이 아닐 때, 익절 신호가 나왔는데 김프가 급락 중이라면, "김프 회복 대기" 로직을 넣어 매도를 30초~1분 정도 지연시키거나 지정가 매도 위치를 조정하는 고난도 기능을 고려해볼 수 있습니다.

💡 요약: 무엇을 먼저 해야 할까요?
보고서 내용을 반영하여 봇을 업그레이드한다면, 우선순위는 다음과 같습니다.

[필수] config.py 점검: MAX_TICKS_FOR_BEP를 현재 호가 단위에 맞춰 조금 더 타이트하게(15 -> 12) 조정하십시오.

[추천] 김프 델타(변화량) 로직: 급격한 김프 상승을 '고점 신호'로 인식하여 매수를 막는 로직을 signal_maker.py에 추가하십시오.

[고급] 팔로워 코인 동적 선정: FOLLOWER_COINS를 고정하지 말고, 스캐너가 BTC와 상관관계가 높은 종목을 찾아내도록 market_scanner.py를 개선하십시오.

현재 사용자님의 코드는 이미 보고서의 **핵심 철학(데이터 기반, 리스크 관리, 시스템 트레이딩)**을 80% 이상 구현하고 있습니다. 위의 디테일만 조금 더 챙기시면 2026년 시장에서도 충분히 강력한 봇이 될 것입니다.